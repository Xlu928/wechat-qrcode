<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <title>添加微信-Lgc-lcx</title>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; padding: 20px; text-align: center; }
        #qrcode { margin: 25px auto; }
        .copy-btn { 
            background: #07c160; 
            color: white; 
            border: none; 
            padding: 12px 25px; 
            border-radius: 8px; 
            cursor: pointer;
        }
        .emergency-box { 
            border: 2px solid #f00; 
            padding: 20px; 
            margin: 30px 0; 
            text-align: left;
        }
    </style>
</head>
<body>
    <h2>添加我的微信</h2>
    <a id="wechatLink" href="weixin://dl/chat?Lgc-lcx">点击跳转到微信</a >
    <div id="qrcode"></div>
    <button class="copy-btn" onclick="copyWechatID()">📋 复制微信号 Lgc-lcx</button>
    
    <div class="emergency-box">
        <h3>⚠️ 如果无法跳转：</h3>
        <p>1. 手动打开微信 → 点击右上角 "+" → 选择「添加朋友」</p >
        <p>2. 搜索微信号：<strong>Lgc-lcx</strong></p >
    </div>

    <script>
        // ======== 微信环境检测 ========
        const isWechat = /micromessenger/i.test(navigator.userAgent);
        if (isWechat) {
            document.body.innerHTML = `
                <div style="text-align:center; padding:40px 20px;">
                    <h3 style="color:#f00;">⚠️ 请在浏览器打开本页面！</h3>
                    <p>1. 点击右上角 ···</p >
                    <p>2. 选择「在浏览器打开」</p >
                    < img src="guide.png" style="width:80%; margin-top:20px;">
                </div>
            `;
        } else {
            // ======== 生成二维码（PC端） ========
            if (!/Mobile/i.test(navigator.userAgent)) {
                new QRCode(document.getElementById("qrcode"), {
                    text: "weixin://dl/chat?Lgc-lcx",
                    width: 200,
                    height: 200,
                    colorDark: "#000"
                });
            }

            // ======== 跳转前确认提示 ========
            document.getElementById("wechatLink").addEventListener("click", function(e) {
                if (!confirm("即将跳转到微信，是否继续？")) {
                    e.preventDefault();
                }
            });
        }

        // ======== 复制功能 ========
        function copyWechatID() {
            navigator.clipboard.writeText("Lgc-lcx");
            alert("已复制微信号！");
        }
    </script>
</body>
</html>