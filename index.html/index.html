<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <title>添加微信-Lgc-lcx</title>
    <!-- 二维码生成库 -->
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            text-align: center;
        }
        #qrcode { margin: 25px auto; }
        .copy-btn {
            background: #07c160;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
        }
        .tips { color: #666; font-size: 14px; margin: 15px 0; }
        .emergency-box {
            border: 2px solid #f00;
            padding: 20px;
            margin: 30px 0;
            text-align: left;
        }
    </style>
</head>
<body>
    <h2>添加我的微信</h2>
    
    <!-- 跳转链接（替换为你的短链） -->
    <a id="wechatLink" href=" " style="display: none;">
        点击跳转到微信
    </a >

    <!-- 二维码容器 -->
    <div id="qrcode"></div>

    <!-- 复制微信号功能 -->
    <button class="copy-btn" onclick="copyWechatID()">📋 复制微信号 Lgc-lcx</button>
    <p id="copyTips" class="tips" style="display: none;">已复制到剪贴板！</p >

    <!-- 应急引导 -->
    <div class="emergency-box">
        <h3>⚠️ 如果无法跳转：</h3>
        <p>1. 手动打开微信 → 点击右上角 "+" → 选择「添加朋友」</p >
        <p>2. 搜索微信号：<strong>Lgc-lcx</strong></p >
    </div>

    <script>
        // ================= 核心功能 =================
        // 1. 设备检测
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);
        const isWechat = /micromessenger/i.test(navigator.userAgent);

        // 2. 微信浏览器特殊处理
        if (isWechat) {
            document.body.innerHTML = `
                <div style="padding: 20px;">
                    <h3 style="color: #f00;">检测到微信内打开！</h3>
                    <p>请按以下步骤操作：</p >
                    <p>1. 点击右上角 ···</p >
                    <p>2. 选择「在浏览器打开」</p >
                    <p>3. 返回此页面点击链接</p >
                </div>
            `;
        } else {
            // 3. 非微信环境初始化
            document.getElementById("wechatLink").style.display = "block";
            
            // 4. 二维码生成（PC端显示）
            if (!isMobile) {
                new QRCode(document.getElementById("qrcode"), {
                    text: "weixin://dl/business/?t=add_contact&alias=Lgc-lcx",
                    width: 200,
                    height: 200,
                    colorDark: "#000000"
                });
            }

            // 5. 跳转失败监听（3秒后显示应急指引）
            setTimeout(() => {
                if (!document.hidden) {
                    document.querySelector(".emergency-box").style.display = "block";
                }
            }, 3000);
        }

        // 6. 复制微信号功能
        function copyWechatID() {
            navigator.clipboard.writeText("Lgc-lcx").then(() => {
                const tip = document.getElementById("copyTips");
                tip.style.display = "block";
                setTimeout(() => tip.style.display = "none", 2000);
            });
        }
    </script>
</body>
</html>